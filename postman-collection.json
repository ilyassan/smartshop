{
  "info": {
    "name": "SmartShop API - Complete Collection",
    "description": "Comprehensive API collection for SmartShop B2B Platform with all endpoints, proper validation, and authentication. Includes 29 endpoints across 6 resource controllers.",
    "version": "2.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Authentication",
      "description": "User authentication endpoints - login, logout, and session management",
      "item": [
        {
          "name": "Login (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Login as Admin user. Creates HTTP session with userId and userRole.\nResponse: AuthResponse with id, username, role, message"
          },
          "response": []
        },
        {
          "name": "Login (Client)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"client1\",\n  \"password\": \"client123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Login as Client user. Creates HTTP session with userId and userRole.\nResponse: AuthResponse with id, username, role, message"
          },
          "response": []
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            },
            "description": "Retrieve current authenticated user information.\nRequires: @RequireAuth (valid session)\nResponse: AuthResponse"
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            },
            "description": "Logout current user and invalidate HTTP session.\nRequires: @RequireAuth\nResponse: Success message"
          },
          "response": []
        }
      ]
    },
    {
      "name": "2. Clients (Users)",
      "description": "Client/User management endpoints - registration, profile, statistics",
      "item": [
        {
          "name": "Register New Client (Signup)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"newclient\",\n  \"password\": \"password123\",\n  \"role\": \"CLIENT\",\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"phone\": \"+1234567890\",\n  \"address\": \"123 Main St, City\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients",
              "host": ["{{baseUrl}}"],
              "path": ["clients"]
            },
            "description": "Register new client (public endpoint - no auth required).\nRequired fields: username, role\nOptional: name, email (validated format), phone, address\nNote: Role forced to CLIENT, loyaltyTier defaults to BASIC\nResponse: UserDTO (password not included)"
          },
          "response": []
        },
        {
          "name": "Get Client By ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/clients/1",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "1"]
            },
            "description": "Get client by ID. Client can only view their own profile, Admin can view any.\nRequires: @RequireAuth\nAuthorization: Checks if user is viewing their own profile or is ADMIN\nResponse: UserDTO"
          },
          "response": []
        },
        {
          "name": "Get All Clients (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/clients",
              "host": ["{{baseUrl}}"],
              "path": ["clients"]
            },
            "description": "Get list of all clients.\nRequires: @RequireRole(ADMIN)\nResponse: List<UserDTO>"
          },
          "response": []
        },
        {
          "name": "Update Client Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"client1\",\n  \"role\": \"CLIENT\",\n  \"name\": \"Updated Name\",\n  \"email\": \"updated@example.com\",\n  \"phone\": \"+9876543210\",\n  \"address\": \"456 New St, Updated City\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients/1",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "1"]
            },
            "description": "Update client profile. Client can only update their own, Admin can update any.\nRequires: @RequireAuth\nRequired fields: username, role\nOptional: name, email (validated), phone, address\nResponse: UserDTO"
          },
          "response": []
        },
        {
          "name": "Delete Client (Admin)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/clients/1",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "1"]
            },
            "description": "Delete client permanently.\nRequires: @RequireRole(ADMIN)\nResponse: 204 No Content"
          },
          "response": []
        },
        {
          "name": "Get Client Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/clients/1/statistics",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "1", "statistics"]
            },
            "description": "Get comprehensive client statistics including orders, spending, loyalty tier.\nRequires: @RequireAuth (client can view own, admin can view any)\nResponse: ClientStatistics with totalOrders, totalSpent, ordersByStatus, recentOrders"
          },
          "response": []
        }
      ]
    },
    {
      "name": "3. Products",
      "description": "Product catalog management - CRUD operations with pagination",
      "item": [
        {
          "name": "Create Product (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Premium Widget\",\n  \"sku\": \"WIDGET-001\",\n  \"description\": \"High quality widget for all your needs\",\n  \"unitPrice\": 99.99,\n  \"stock\": 100,\n  \"category\": \"Electronics\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/products",
              "host": ["{{baseUrl}}"],
              "path": ["products"]
            },
            "description": "Create new product.\nRequires: @RequireRole(ADMIN)\nRequired: name, sku (unique), unitPrice\nOptional: description, stock (default 0), category\nResponse: ProductDTO with id"
          },
          "response": []
        },
        {
          "name": "Get Product By ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/1",
              "host": ["{{baseUrl}}"],
              "path": ["products", "1"]
            },
            "description": "Get product details by ID (public endpoint).\nNo authentication required\nResponse: ProductDTO"
          },
          "response": []
        },
        {
          "name": "Get All Products (Paginated)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products?page=0&size=10&sortBy=id&sortDirection=ASC",
              "host": ["{{baseUrl}}"],
              "path": ["products"],
              "query": [
                {
                  "key": "page",
                  "value": "0",
                  "description": "Page number (default: 0)"
                },
                {
                  "key": "size",
                  "value": "10",
                  "description": "Page size (default: 10)"
                },
                {
                  "key": "sortBy",
                  "value": "id",
                  "description": "Sort field (default: id)"
                },
                {
                  "key": "sortDirection",
                  "value": "ASC",
                  "description": "Sort direction: ASC or DESC (default: ASC)"
                }
              ]
            },
            "description": "Get paginated list of products (public endpoint).\nNo authentication required\nQuery params: page, size, sortBy, sortDirection\nResponse: Page<ProductDTO>"
          },
          "response": []
        },
        {
          "name": "Update Product (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Premium Widget\",\n  \"sku\": \"WIDGET-001\",\n  \"description\": \"Updated description\",\n  \"unitPrice\": 109.99,\n  \"stock\": 150,\n  \"category\": \"Electronics\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/products/1",
              "host": ["{{baseUrl}}"],
              "path": ["products", "1"]
            },
            "description": "Update existing product.\nRequires: @RequireRole(ADMIN)\nRequired: name, sku, unitPrice\nOptional: description, stock, category\nResponse: ProductDTO"
          },
          "response": []
        },
        {
          "name": "Delete Product (Admin - Soft Delete)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/products/1",
              "host": ["{{baseUrl}}"],
              "path": ["products", "1"]
            },
            "description": "Soft delete product (sets deleted flag to true).\nRequires: @RequireRole(ADMIN)\nResponse: 204 No Content"
          },
          "response": []
        }
      ]
    },
    {
      "name": "4. Orders",
      "description": "Order management - creation, tracking, confirmation, cancellation",
      "item": [
        {
          "name": "Create Order (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": 2,\n  \"items\": [\n    {\n      \"productId\": 1,\n      \"quantity\": 3\n    },\n    {\n      \"productId\": 2,\n      \"quantity\": 5\n    }\n  ],\n  \"couponCode\": \"PROMO-ABC1\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": ["{{baseUrl}}"],
              "path": ["orders"]
            },
            "description": "Create new order for a user.\nRequires: @RequireRole(ADMIN)\nRequired: userId, items (list with productId and quantity)\nOptional: couponCode\nBusiness logic: Validates user exists, products exist, calculates totals, applies tax (20%), applies coupon discount\nResponse: OrderDTO with status PENDING"
          },
          "response": []
        },
        {
          "name": "Get Order By ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders/1",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "1"]
            },
            "description": "Get order details by ID.\nRequires: @RequireAuth\nAuthorization: Client can only view their own orders, Admin can view any\nResponse: OrderDTO"
          },
          "response": []
        },
        {
          "name": "Get Orders By User ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders/user/2",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "user", "2"]
            },
            "description": "Get all orders for a specific user.\nRequires: @RequireAuth\nAuthorization: Client can only view their own orders, Admin can view any user's orders\nResponse: List<OrderDTO>"
          },
          "response": []
        },
        {
          "name": "Get All Orders (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders",
              "host": ["{{baseUrl}}"],
              "path": ["orders"]
            },
            "description": "Get all orders in the system.\nRequires: @RequireRole(ADMIN)\nResponse: List<OrderDTO>"
          },
          "response": []
        },
        {
          "name": "Confirm Order (Admin)",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders/1/confirm",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "1", "confirm"]
            },
            "description": "Confirm order - changes status from PENDING to CONFIRMED.\nRequires: @RequireRole(ADMIN)\nBusiness logic: Only PENDING orders can be confirmed\nResponse: OrderDTO with status CONFIRMED"
          },
          "response": []
        },
        {
          "name": "Cancel Order",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders/1/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "1", "cancel"]
            },
            "description": "Cancel order - changes status to CANCELED.\nRequires: @RequireAuth\nAuthorization: Client can cancel their own orders, Admin can cancel any\nBusiness logic: Only PENDING or CONFIRMED orders can be canceled, restores stock if payments exist\nResponse: OrderDTO with status CANCELED"
          },
          "response": []
        }
      ]
    },
    {
      "name": "5. Payments",
      "description": "Payment processing - track and manage order payments with multiple methods",
      "item": [
        {
          "name": "Create Payment (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": 1,\n  \"paymentNumber\": 1,\n  \"amount\": 100.00,\n  \"paymentMethod\": \"TRANSFER\",\n  \"paymentDate\": \"2025-12-07\",\n  \"reference\": \"TRF-2025-001\",\n  \"status\": \"PENDING\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": ["{{baseUrl}}"],
              "path": ["payments"]
            },
            "description": "Create payment for an order.\nRequires: @RequireRole(ADMIN)\nRequired fields: orderId, paymentNumber, amount, paymentMethod, paymentDate, reference, status\nPaymentMethod: CASH, CHECK, TRANSFER\nPaymentStatus: PENDING, COLLECTED\nOptional: collectionDate, bankName (for CHECK), dueDate\nBusiness logic on first payment: deducts stock, marks coupon as used, checks pending orders\nResponse: PaymentDTO"
          },
          "response": []
        },
        {
          "name": "Create Payment - CHECK Example",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": 1,\n  \"paymentNumber\": 2,\n  \"amount\": 150.00,\n  \"paymentMethod\": \"CHECK\",\n  \"paymentDate\": \"2025-12-07\",\n  \"collectionDate\": \"2025-12-15\",\n  \"reference\": \"CHK-2025-002\",\n  \"bankName\": \"BNP Paribas\",\n  \"status\": \"PENDING\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": ["{{baseUrl}}"],
              "path": ["payments"]
            },
            "description": "Create CHECK payment with additional fields.\nRequires: @RequireRole(ADMIN)\nCHECK-specific fields: collectionDate, bankName\nResponse: PaymentDTO"
          },
          "response": []
        },
        {
          "name": "Create Payment - CASH Example",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": 1,\n  \"paymentNumber\": 3,\n  \"amount\": 50.00,\n  \"paymentMethod\": \"CASH\",\n  \"paymentDate\": \"2025-12-07\",\n  \"reference\": \"CASH-2025-003\",\n  \"status\": \"COLLECTED\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": ["{{baseUrl}}"],
              "path": ["payments"]
            },
            "description": "Create CASH payment (usually COLLECTED immediately).\nRequires: @RequireRole(ADMIN)\nResponse: PaymentDTO"
          },
          "response": []
        },
        {
          "name": "Get Payment By ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments/1",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "1"]
            },
            "description": "Get payment details by ID.\nRequires: @RequireAuth\nAuthorization: Client can only view payments for their own orders, Admin can view any\nResponse: PaymentDTO"
          },
          "response": []
        },
        {
          "name": "Get Payments By Order ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments/order/1",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "order", "1"]
            },
            "description": "Get all payments for a specific order.\nRequires: @RequireAuth\nAuthorization: Client can only view payments for their own orders, Admin can view any\nResponse: List<PaymentDTO>"
          },
          "response": []
        },
        {
          "name": "Get All Payments (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": ["{{baseUrl}}"],
              "path": ["payments"]
            },
            "description": "Get all payments in the system.\nRequires: @RequireRole(ADMIN)\nResponse: List<PaymentDTO>"
          },
          "response": []
        },
        {
          "name": "Update Payment (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"orderId\": 1,\n  \"paymentNumber\": 1,\n  \"amount\": 120.00,\n  \"paymentMethod\": \"TRANSFER\",\n  \"paymentDate\": \"2025-12-07\",\n  \"reference\": \"TRF-2025-001-UPDATED\",\n  \"status\": \"COLLECTED\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments/1",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "1"]
            },
            "description": "Update payment details (e.g., change status from PENDING to COLLECTED).\nRequires: @RequireRole(ADMIN)\nAll required fields must be provided\nResponse: PaymentDTO"
          },
          "response": []
        },
        {
          "name": "Delete Payment (Admin)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments/1",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "1"]
            },
            "description": "Delete payment and restore order remaining amount.\nRequires: @RequireRole(ADMIN)\nBusiness logic: Updates order's remaining amount\nResponse: 204 No Content"
          },
          "response": []
        }
      ]
    },
    {
      "name": "6. Coupons",
      "description": "Coupon/discount management - create, validate, and track usage",
      "item": [
        {
          "name": "Create Coupon (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"PROMO-XYZ9\",\n  \"discountPercentage\": 15.00\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/coupons",
              "host": ["{{baseUrl}}"],
              "path": ["coupons"]
            },
            "description": "Create new coupon.\nRequires: @RequireRole(ADMIN)\nRequired: code (format: PROMO-XXXX where X is alphanumeric), discountPercentage\nValidation: Code must match pattern PROMO-[A-Z0-9]{4}\nDefault: isUsed = false\nResponse: CouponDTO"
          },
          "response": []
        },
        {
          "name": "Get Coupon By ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/coupons/1",
              "host": ["{{baseUrl}}"],
              "path": ["coupons", "1"]
            },
            "description": "Get coupon by ID (public endpoint).\nNo authentication required\nResponse: CouponDTO"
          },
          "response": []
        },
        {
          "name": "Get Coupon By Code",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/coupons/code/PROMO-XYZ9",
              "host": ["{{baseUrl}}"],
              "path": ["coupons", "code", "PROMO-XYZ9"]
            },
            "description": "Get coupon by code (public endpoint for validation).\nNo authentication required\nResponse: CouponDTO"
          },
          "response": []
        },
        {
          "name": "Get All Coupons (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/coupons",
              "host": ["{{baseUrl}}"],
              "path": ["coupons"]
            },
            "description": "Get all coupons.\nRequires: @RequireRole(ADMIN)\nResponse: List<CouponDTO>"
          },
          "response": []
        },
        {
          "name": "Update Coupon (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"PROMO-XYZ9\",\n  \"discountPercentage\": 20.00\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/coupons/1",
              "host": ["{{baseUrl}}"],
              "path": ["coupons", "1"]
            },
            "description": "Update coupon details.\nRequires: @RequireRole(ADMIN)\nRequired: code (pattern validated), discountPercentage\nResponse: CouponDTO"
          },
          "response": []
        },
        {
          "name": "Delete Coupon (Admin)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/coupons/1",
              "host": ["{{baseUrl}}"],
              "path": ["coupons", "1"]
            },
            "description": "Delete coupon permanently.\nRequires: @RequireRole(ADMIN)\nResponse: 204 No Content"
          },
          "response": []
        },
        {
          "name": "Use Coupon (Admin)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/coupons/use/PROMO-XYZ9",
              "host": ["{{baseUrl}}"],
              "path": ["coupons", "use", "PROMO-XYZ9"]
            },
            "description": "Mark coupon as used and delete it (called automatically on first payment).\nRequires: @RequireRole(ADMIN)\nResponse: 204 No Content"
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080/api",
      "type": "string"
    }
  ]
}
